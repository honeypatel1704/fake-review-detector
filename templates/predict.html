<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check a Review | Fake Review Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='predict.css') }}">
</head>

<body class="predict-body">

    <div class="predict-container">

        <!-- LEFT SIDE -->
        <div class="left-box">

            <h1 class="left-title">Check a Review</h1>

            <img src="{{ url_for('static', filename='register_robot.png') }}" class="predict-robot">

            <ul class="info-points">
                <li>Find out how to identify the scale and types of risks your platform is facing</li>
                <li>Understand the benefits of our continual threat intelligence</li>
                <li>Learn how we use cluster analysis to connect bad actors and identify biggest threats</li>
            </ul>

        </div>

        <!-- RIGHT SIDE -->
        <div class="right-box">

            <h1 class="right-title">Fake Review Detection</h1>

            <label class="label">Company name</label>
            <input type="text" id="company" class="text-input" placeholder="Enter company name">

            <label class="label">Review</label>
            <textarea id="reviewInput" class="review-box" placeholder="Write your review here..."></textarea>

            <button class="check-btn" onclick="checkReview()">CHECK REVIEW â†’</button>

            <div class="result" id="resultText"></div>

            <!-- Bottom small robot -->
            <img src="{{ url_for('static', filename='login_robot_small.png') }}" class="tiny-robot">

        </div>

    </div>

<script>
function checkReview() {
    const review = document.getElementById("reviewInput").value;

    fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ review: review })
    })
    .then(res => res.json())
    .then(data => {

        // Show result
        document.getElementById("resultText").innerHTML =
            data.prediction === "FAKE"
            ? "ðŸš¨ FAKE REVIEW DETECTED!"
            : "âœ… REAL REVIEW";

        // â­ Auto-clear the textarea + result after 2 seconds
        setTimeout(() => {
            document.getElementById("reviewInput").value = "";
            document.getElementById("resultText").innerHTML = "";
        }, 2000);
    });
}
</script>

</body>
</html>
